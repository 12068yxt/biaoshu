# =============================================================================
# SVG工作流主配置文件
# 所有可变参数集中管理，配置变更无需重启（热重载）
# =============================================================================

# -----------------------------------------------------------------------------
# LLM后端配置（Rule 2：多模型后端兼容）
# 密钥优先从环境变量读取，其次从此处配置（禁止代码硬编码）
# -----------------------------------------------------------------------------
llm:
  # 后端类型：openrouter | dashscope | openai
  backend: "openrouter"

  # --- OpenRouter 配置 ---
  openrouter:
    base_url: "https://openrouter.ai/api/v1"
    # 密钥从环境变量 OPENROUTER_API_KEY 读取（留空则使用环境变量）
    api_key_env: "OPENROUTER_API_KEY"
    model: "anthropic/claude-3.5-sonnet"
    temperature: 0.3
    max_tokens: 4096

  # --- 阿里云百炼 / 通义千问 配置 ---
  dashscope:
    base_url: "https://dashscope.aliyuncs.com/compatible-mode/v1"
    # 密钥从环境变量 DASHSCOPE_API_KEY 读取
    api_key_env: "DASHSCOPE_API_KEY"
    model: "qwen-max"
    temperature: 0.3
    max_tokens: 4096

  # --- 标准 OpenAI 配置 ---
  openai:
    base_url: "https://api.openai.com/v1"
    api_key_env: "OPENAI_API_KEY"
    model: "gpt-4o"
    temperature: 0.3
    max_tokens: 4096

  # 通用重试配置（指数退避）
  retry_times: 2          # 最大重试次数（不含首次，共3次调用）
  retry_base_delay: 1.0   # 初始等待秒数，每次乘2

# -----------------------------------------------------------------------------
# 提示词文件路径配置（Rule 3：提示词文件化）
# 所有路径相对于工作目录
# -----------------------------------------------------------------------------
prompts:
  system_file: "src/prompts/system.txt"
  user_file: "src/prompts/user.txt"
  examples_file: "src/prompts/examples.txt"

# -----------------------------------------------------------------------------
# 输出路径配置
# -----------------------------------------------------------------------------
output:
  svg_dir: "output/svgs"
  report_file: "output/report.json"
  mermaid_file: "output/workflow_graph.md"
