# 🔄 智能跳过功能使用说明

## 🎯 功能特点

智能跳过版脚本 (`smart_skip_expand.py`) 能够：

1. **自动检测已生成内容** - 检查当前目录下的章节文件
2. **扫描主输出文件** - 从已有的 `_expanded.md` 文件中提取已完成章节
3. **智能筛选待处理内容** - 只处理尚未生成的章节
4. **避免重复工作** - 节省时间和API调用次数

## 🚀 使用方法

### 基本使用
```bash
# 进入脚本目录
cd /home/xiaoting/biaoshu/tmp/scripts

# 运行智能跳过处理
uv run python smart_skip_expand.py
```

### 工作流程

1. **自动扫描** - 脚本会自动扫描：
   - 当前目录下所有 `chapter_*.md` 文件
   - 对应的主输出文件（如 `模型架构_smart.md`）

2. **智能对比** - 将已存在内容与源文档的所有标题进行对比

3. **筛选处理** - 只对尚未生成的章节进行处理

4. **用户确认** - 处理前会显示待处理章节列表并请求确认

## 📊 输出示例

```
✅ 读取源文档: 模型架构.md
📚 发现 28 个六级标题
🔍 检测到 15 个已存在的章节
📄 从主文件检测到 12 个已完成章节
📊 处理统计:
  总章节数: 28
  已完成: 18
  待处理: 10
🎯 将处理以下章节:
  1. 1.2.2.11.5 新章节标题
  2. 1.2.2.11.6 另一个新章节
  ...

[确认处理这 10 个章节? (y/N): ]
```

## 🎯 适用场景

### ✅ 推荐使用情况：
- 部分章节已生成，需要补充剩余内容
- 中断后继续处理文档
- 避免重复生成已有的高质量内容
- 节省API调用配额

### ⚠️ 注意事项：
- 确保章节文件命名格式正确
- 已生成文件不要随意重命名
- 建议保留原始的章节标题信息

## 📁 文件管理

处理完成后会产生：
- **主输出文件**: `{原文件名}_smart.md`
- **独立章节文件**: `chapter_{编号}._{标题}_smart.md`

## 🔧 高级选项

如果需要强制重新生成所有内容：
```bash
# 删除已生成的文件后重新运行
rm chapter_*_smart.md *_smart.md
uv run python smart_skip_expand.py
```

## 💡 最佳实践

1. **定期备份** - 处理前备份重要的已生成内容
2. **逐步处理** - 可以分批处理，每次确认待处理内容
3. **检查质量** - 处理完成后检查新生成内容的质量
4. **合理命名** - 保持文件命名的一致性

这个智能跳过功能让您能够高效地继续未完成的工作，避免重复劳动！